{% load template_filters %}
<style>
    .order-table-names {
        background-color: lightgray;
    }

    .order-table-total {
        background-color: lightgray;
    }
</style>
<div id="order-entries-list-{{ order.pk }}">
  <div class="table-responsive">
    <table class="table bg-white mb-0">
      <colgroup>
        <col class="order-table-names"/>
        <col class="order-table-total"/>
        <col/>
      </colgroup>
      <thead>
      <tr>
        <th class="text-center" scope="col">Деталь</th>
        <th class="text-center" scope="col">Всего</th>
        {% for step in steps %}
          <th class="text-center" scope="col"> {{ step.name }} </th>
        {% endfor %}
      </tr>
      </thead>
      <tbody>
      {% for order_entry in order.orderentry_set.all %}
        <tr>
          <td class="text-center">
            {{ order_entry.detail }}
          </td>
          <td class="text-center">
            {{ order_entry.quantity }}
          </td>
          {% for step in steps %}
            <td class="text-center">
              {{ leftovers|lookup:step.pk|lookup:order_entry.pk }}
            </td>
          {% endfor %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
